<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat en Vivo | Remeex VISA</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --visa-blue: #1A1F71;
            --visa-blue-light: #293ca3;
            --visa-blue-dark: #141850;
            --visa-blue-transparent: rgba(26, 31, 113, 0.95);
            --visa-blue-ghost: rgba(26, 31, 113, 0.07);
            --light-blue: #E9EEFF;
            --light-blue-alt: #f0f4ff;
            --white: #FFFFFF;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --gray-800: #1F2937;
            --gray-900: #111827;
            --success: #10B981;
            --success-light: rgba(16, 185, 129, 0.1);
            --warning: #FBBF24;
            --warning-light: rgba(251, 191, 36, 0.1);
            --danger: #EF4444;
            --danger-light: rgba(239, 68, 68, 0.1);
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --ease: cubic-bezier(0.16, 1, 0.3, 1);
            --font-sans: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-sans);
            font-size: 14px;
            line-height: 1.5;
            color: var(--gray-700);
            background-color: var(--gray-50);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }
        
        /* Chat Container */
        .chat-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 999;
            display: flex;
            flex-direction: column;
        }
        
        /* Chat Header */
        .chat-header {
            background-color: var(--visa-blue);
            color: var(--white);
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 10;
        }
        
        .chat-header-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .chat-logo {
            height: 32px;
            border-radius: 4px;
        }
        
        .chat-title-info {
            display: flex;
            flex-direction: column;
        }
        
        .chat-title {
            font-weight: 700;
            font-size: 18px;
            line-height: 1.2;
        }
        
        .chat-subtitle {
            font-size: 13px;
            opacity: 0.8;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .online-count {
            display: flex;
            align-items: center;
            gap: 6px;
            background-color: rgba(255, 255, 255, 0.15);
            padding: 4px 10px;
            border-radius: 100px;
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .online-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: var(--success);
            border-radius: 50%;
            position: relative;
        }
        
        .online-dot::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background-color: var(--success);
            border-radius: 50%;
            opacity: 0.4;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.4; }
            50% { transform: scale(1.3); opacity: 0.2; }
            100% { transform: scale(1); opacity: 0.4; }
        }
        
        .chat-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .chat-action-btn {
            background: none;
            border: none;
            color: var(--white);
            font-size: 20px;
            cursor: pointer;
            opacity: 0.8;
            transition: all 0.2s var(--ease);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 8px;
        }
        
        .chat-action-btn:hover {
            opacity: 1;
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Chat Body */
        .chat-body-wrapper {
            flex: 1;
            overflow: hidden;
            position: relative;
            background-color: var(--gray-50);
        }
        
        .chat-body {
            height: 100%;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 14px;
        }
        
        /* Chat Sidebar */
        .chat-sidebar {
            position: absolute;
            top: 0;
            right: -320px;
            width: 320px;
            height: 100%;
            background-color: var(--white);
            box-shadow: var(--shadow-lg);
            z-index: 20;
            transition: right 0.3s var(--ease);
            display: flex;
            flex-direction: column;
        }
        
        .chat-sidebar.active {
            right: 0;
        }
        
        .sidebar-header {
            background-color: var(--visa-blue);
            color: var(--white);
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .sidebar-title {
            font-weight: 600;
            font-size: 16px;
        }
        
        .sidebar-close {
            background: none;
            border: none;
            color: var(--white);
            font-size: 18px;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.2s var(--ease);
        }
        
        .sidebar-close:hover {
            opacity: 1;
        }
        
        .sidebar-body {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .sidebar-section {
            margin-bottom: 24px;
        }
        
        .sidebar-section-title {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 12px;
            color: var(--gray-800);
        }
        
        .online-users-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .online-user {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .online-user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--light-blue);
            color: var(--visa-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            position: relative;
        }
        
        .online-user-avatar.mod {
            background-color: var(--visa-blue);
            color: var(--white);
        }
        
        .online-status {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--success);
            border: 2px solid var(--white);
        }
        
        .online-user-info {
            flex: 1;
        }
        
        .online-user-name {
            font-weight: 600;
            font-size: 14px;
            color: var(--gray-800);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .user-badge {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 500;
            text-transform: uppercase;
        }
        
        .mod-badge {
            background-color: var(--visa-blue);
            color: var(--white);
        }
        
        .online-user-status {
            font-size: 12px;
            color: var(--gray-500);
        }
        
        .chat-rules {
            background-color: var(--light-blue-alt);
            border: 1px solid rgba(26, 31, 113, 0.1);
            border-radius: 10px;
            padding: 15px;
        }
        
        .rules-list {
            margin-top: 10px;
            padding-left: 20px;
        }
        
        .rules-list li {
            margin-bottom: 8px;
            font-size: 13px;
            color: var(--gray-700);
        }
        
        /* Chat Message */
        .chat-message {
            display: flex;
            gap: 10px;
            animation: fadeIn 0.3s ease-out;
            max-width: 90%;
        }
        
        .chat-message.align-right {
            align-self: flex-end;
            flex-direction: row-reverse;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background-color: var(--light-blue);
            color: var(--visa-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
            position: relative;
        }
        
        .moderator-avatar {
            background-color: var(--visa-blue);
            color: var(--white);
        }
        
        .message-content {
            flex: 1;
            background-color: var(--white);
            padding: 12px 16px;
            border-radius: 18px;
            border-top-left-radius: 4px;
            border: 1px solid var(--gray-200);
            box-shadow: var(--shadow-sm);
            position: relative;
            min-width: 0;
        }
        
        .chat-message.align-right .message-content {
            border-radius: 18px;
            border-top-right-radius: 4px;
            background-color: var(--light-blue-alt);
            border-color: rgba(26, 31, 113, 0.15);
        }
        
        .moderator-message .message-content {
            background-color: var(--visa-blue-ghost);
            border-color: rgba(26, 31, 113, 0.1);
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            flex-wrap: wrap;
        }
        
        .username {
            font-weight: 600;
            font-size: 14px;
            color: var(--gray-800);
            display: flex;
            align-items: center;
            gap: 6px;
            margin-right: 8px;
        }
        
        .moderator-message .username {
            color: var(--visa-blue);
        }
        
        .moderator-badge {
            background-color: var(--visa-blue);
            color: var(--white);
            font-size: 10px;
            padding: 1px 6px;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .message-time {
            font-size: 12px;
            color: var(--gray-500);
        }
        
        .message-text {
            font-size: 14px;
            line-height: 1.5;
            word-break: break-word;
            white-space: pre-wrap;
        }
        
        .message-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 8px;
            font-size: 12px;
        }
        
        .message-action {
            color: var(--gray-500);
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            transition: color 0.2s var(--ease);
        }
        
        .message-action:hover {
            color: var(--visa-blue);
        }
        
        /* System Message */
        .system-message {
            display: flex;
            justify-content: center;
            margin: 10px 0;
            animation: fadeIn 0.3s ease-out;
        }
        
        .system-content {
            background-color: var(--gray-100);
            color: var(--gray-600);
            font-size: 12px;
            padding: 6px 12px;
            border-radius: 100px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .join-message .system-content {
            background-color: var(--success-light);
            color: var(--success);
        }
        
        .leave-message .system-content {
            background-color: var(--gray-200);
            color: var(--gray-600);
        }
        
        .announcement-message .system-content {
            background-color: var(--visa-blue-ghost);
            color: var(--visa-blue);
            font-weight: 500;
        }
        
        /* Typing Indicator */
        .typing {
            display: none;
        }
        
        .typing.active {
            display: flex;
        }
        
        .typing-indicator {
            display: flex;
            gap: 4px;
            margin-top: 4px;
            height: 10px;
            align-items: center;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            background-color: var(--gray-400);
            border-radius: 50%;
            animation: typingAnimation 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typingAnimation {
            0%, 60%, 100% { 
                transform: translateY(0); 
                opacity: 0.6;
            }
            30% { 
                transform: translateY(-4px); 
                opacity: 1;
            }
        }
        
        /* Chat Input */
        .chat-input-container {
            padding: 16px 20px;
            background-color: var(--white);
            border-top: 1px solid var(--gray-200);
            display: flex;
            gap: 12px;
            align-items: flex-end;
            position: relative;
            z-index: 10;
        }
        
        .chat-input-wrapper {
            flex: 1;
            position: relative;
        }
        
        .chat-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--gray-300);
            border-radius: 24px;
            font-size: 14px;
            line-height: 1.5;
            font-family: var(--font-sans);
            outline: none;
            transition: all 0.2s var(--ease);
            max-height: 120px;
            overflow-y: auto;
            resize: none;
        }
        
        .chat-input:focus {
            border-color: var(--visa-blue);
            box-shadow: 0 0 0 3px rgba(26, 31, 113, 0.1);
        }
        
        .chat-input::placeholder {
            color: var(--gray-400);
        }
        
        .input-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .emoji-button {
            background: none;
            border: none;
            color: var(--gray-500);
            font-size: 20px;
            cursor: pointer;
            transition: color 0.2s var(--ease);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 42px;
            height: 42px;
            border-radius: 50%;
        }
        
        .emoji-button:hover {
            color: var(--visa-blue);
            background-color: var(--gray-100);
        }
        
        .send-button {
            background-color: var(--visa-blue);
            color: var(--white);
            border: none;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s var(--ease);
            box-shadow: var(--shadow-md);
        }
        
        .send-button:hover {
            background-color: var(--visa-blue-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .send-button:active {
            transform: translateY(0);
        }
        
        /* Notifications */
        .toast-notification {
            position: fixed;
            bottom: 100px;
            right: 20px;
            background-color: var(--visa-blue);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            z-index: 2000;
            max-width: 360px;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            pointer-events: none;
        }
        
        .toast-notification.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .toast-notification.success {
            background-color: var(--success);
        }
        
        .toast-notification.error {
            background-color: var(--danger);
        }
        
        /* Pinned Message */
        .pinned-message {
            background-color: var(--visa-blue-ghost);
            border: 1px solid rgba(26, 31, 113, 0.1);
            border-radius: 12px;
            padding: 10px 16px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideDown 0.3s ease-out;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pinned-icon {
            color: var(--visa-blue);
            font-size: 18px;
        }
        
        .pinned-content {
            flex: 1;
            overflow: hidden;
        }
        
        .pinned-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--visa-blue);
            margin-bottom: 2px;
        }
        
        .pinned-text {
            font-size: 13px;
            color: var(--gray-700);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .pinned-close {
            background: none;
            border: none;
            color: var(--gray-500);
            font-size: 14px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s var(--ease);
        }
        
        .pinned-close:hover {
            opacity: 1;
        }
        
        /* Chat Filter */
        .chat-filter {
            padding: 10px 20px;
            background-color: var(--white);
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--gray-200);
            overflow-x: auto;
            white-space: nowrap;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }
        
        .chat-filter::-webkit-scrollbar {
            display: none; /* Chrome/Safari */
        }
        
        .filter-button {
            padding: 6px 12px;
            background-color: var(--gray-100);
            border: 1px solid var(--gray-200);
            border-radius: 100px;
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-700);
            cursor: pointer;
            transition: all 0.2s var(--ease);
            white-space: nowrap;
        }
        
        .filter-button:hover {
            border-color: var(--visa-blue);
        }
        
        .filter-button.active {
            background-color: var(--visa-blue);
            color: var(--white);
            border-color: var(--visa-blue);
        }
        
        .filter-divider {
            width: 1px;
            height: 20px;
            background-color: var(--gray-300);
            margin: 0 5px;
        }
        
        /* New Message Indicator */
        .new-messages-indicator {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--visa-blue);
            color: var(--white);
            padding: 8px 16px;
            border-radius: 100px;
            font-size: 13px;
            font-weight: 500;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s var(--ease);
            z-index: 5;
        }
        
        .new-messages-indicator.show {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, 0);
        }
        
        .new-messages-indicator:hover {
            background-color: var(--visa-blue-light);
        }
        
        /* User Status Indicator */
        .user-status {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--success);
            border: 2px solid var(--white);
        }
        
        .user-status.away {
            background-color: var(--warning);
        }
        
        .user-status.offline {
            background-color: var(--gray-400);
        }
        
        /* Media Queries */
        @media (min-width: 768px) {
            .chat-container {
                width: 100%;
                max-width: 100%;
                height: 100vh;
            }
        }
        
        @media (max-width: 767px) {
            .chat-logo {
                height: 28px;
            }
            
            .chat-title {
                font-size: 16px;
            }
            
            .chat-subtitle {
                font-size: 12px;
            }
            
            .chat-body {
                padding: 16px;
            }
            
            .chat-filter {
                padding: 8px 16px;
            }
            
            .chat-sidebar {
                width: 280px;
                right: -280px;
            }
        }
        
        /* Fullscreen Mode */
        body.fullscreen-mode {
            overflow: hidden;
        }
        
        body.fullscreen-mode .chat-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        
        /* Emoji Picker */
        .emoji-picker {
            position: absolute;
            bottom: 100%;
            right: 0;
            background-color: var(--white);
            border-radius: 12px;
            box-shadow: var(--shadow-xl);
            width: 320px;
            height: 300px;
            z-index: 30;
            display: none;
            overflow: hidden;
            flex-direction: column;
            animation: fadeIn 0.2s var(--ease);
        }
        
        .emoji-picker.show {
            display: flex;
        }
        
        .emoji-picker-header {
            padding: 12px 16px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .emoji-picker-title {
            font-weight: 600;
            font-size: 14px;
            color: var(--gray-800);
        }
        
        .emoji-picker-close {
            background: none;
            border: none;
            color: var(--gray-500);
            font-size: 16px;
            cursor: pointer;
        }
        
        .emoji-picker-categories {
            display: flex;
            gap: 8px;
            padding: 8px 16px;
            border-bottom: 1px solid var(--gray-200);
            overflow-x: auto;
        }
        
        .emoji-category {
            padding: 6px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s var(--ease);
        }
        
        .emoji-category:hover {
            background-color: var(--gray-100);
        }
        
        .emoji-category.active {
            background-color: var(--light-blue-alt);
            color: var(--visa-blue);
        }
        
        .emoji-list {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
        }
        
        .emoji-item {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            transition: background-color 0.2s var(--ease);
        }
        
        .emoji-item:hover {
            background-color: var(--gray-100);
        }
        
        /* User Popover */
        .user-popover {
            position: absolute;
            z-index: 100;
            background-color: var(--white);
            border-radius: 12px;
            box-shadow: var(--shadow-xl);
            width: 280px;
            display: none;
            animation: fadeIn 0.2s var(--ease);
            border: 1px solid var(--gray-200);
            overflow: hidden;
        }
        
        .user-popover.show {
            display: block;
        }
        
        .user-popover-header {
            background-color: var(--visa-blue);
            color: var(--white);
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .user-popover-avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background-color: var(--light-blue);
            color: var(--visa-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 24px;
            margin-bottom: 12px;
            border: 4px solid rgba(255, 255, 255, 0.2);
        }
        
        .user-popover-avatar.mod {
            background-color: var(--white);
            color: var(--visa-blue);
        }
        
        .user-popover-name {
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 4px;
        }
        
        .user-popover-role {
            font-size: 13px;
            opacity: 0.8;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        
        .user-popover-content {
            padding: 16px;
        }
        
        .user-popover-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 16px;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }
        
        .info-icon {
            color: var(--visa-blue);
            font-size: 16px;
            width: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .user-popover-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .user-action-btn {
            padding: 8px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s var(--ease);
        }
        
        .user-action-btn:hover {
            background-color: var(--gray-100);
        }
        
        .user-action-btn i {
            width: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <!-- Chat Header -->
        <div class="chat-header">
            <div class="chat-header-title">
                <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnBzNdjl6bNp-nIdaiHVENczJhwlJNA7ocsyiOObMmzbu8at0dY5yGcZ9cLxLF39qI6gwNfqBxlkTDC0txVULEwQVwGkeEzN0Jq9MRTRagA48mh18UqTlR4WhsXOLAEZugUyhqJHB19xJgnkpe-S5VOWFgzpKFwctv3XP9XhH41vNTvq0ZS-nik58Qhr-O/s16000/remeex.png" alt="Remeex Logo" class="chat-logo">
                <div class="chat-title-info">
                    <div class="chat-title">Chat de la Comunidad Remeex</div>
                    <div class="chat-subtitle">
                        <span>Conversación en vivo</span>
                        <div class="online-count">
                            <span class="online-dot"></span>
                            <span id="usersCount">326</span> en línea
                        </div>
                    </div>
                </div>
            </div>
            <div class="chat-actions">
                <button class="chat-action-btn" id="info-button" title="Información y usuarios">
                    <i class="fas fa-info-circle"></i>
                </button>
                <button class="chat-action-btn" id="fullscreen-button" title="Pantalla completa">
                    <i class="fas fa-expand"></i>
                </button>
                <button class="chat-action-btn" id="minimize-button" title="Minimizar chat">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="chat-action-btn" id="close-button" title="Cerrar chat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <!-- Chat Filter -->
        <div class="chat-filter" id="chat-filter">
            <button class="filter-button active" data-filter="all">Todos los mensajes</button>
            <button class="filter-button" data-filter="mod">Respuestas oficiales</button>
            <div class="filter-divider"></div>
            <button class="filter-button" data-filter="tasa">Tasa de cambio</button>
            <button class="filter-button" data-filter="verificacion">Verificación</button>
            <button class="filter-button" data-filter="bancos">Bancos</button>
            <button class="filter-button" data-filter="comisiones">Comisiones</button>
            <button class="filter-button" data-filter="soporte">Soporte</button>
        </div>
        
        <!-- Chat Body -->
        <div class="chat-body-wrapper">
            <div class="chat-body" id="chat-body">
                <!-- Pinned Message -->
                <div class="pinned-message" id="pinned-message">
                    <i class="fas fa-thumbtack pinned-icon"></i>
                    <div class="pinned-content">
                        <div class="pinned-title">Mensaje fijado por Miguel Remeex</div>
                        <div class="pinned-text">¡Bienvenidos al chat de la comunidad Remeex! Recuerda que si compartes tu experiencia en nuestra sección de opiniones recibirás $5 de regalo.</div>
                    </div>
                    <button class="pinned-close" id="pinned-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <!-- The chat messages will be loaded here dynamically -->
            </div>
            
            <!-- New Messages Indicator -->
            <div class="new-messages-indicator" id="new-messages-indicator">
                <i class="fas fa-arrow-down"></i>
                <span>Nuevos mensajes</span>
            </div>
            
            <!-- Chat Sidebar -->
            <div class="chat-sidebar" id="chat-sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-title">Información y usuarios</div>
                    <button class="sidebar-close" id="sidebar-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="sidebar-body">
                    <div class="sidebar-section">
                        <div class="sidebar-section-title">Usuarios en línea</div>
                        <div class="online-users-list" id="online-users-list">
                            <!-- Online users will be loaded dynamically -->
                        </div>
                    </div>
                    <div class="sidebar-section">
                        <div class="sidebar-section-title">Reglas del chat</div>
                        <div class="chat-rules">
                            <ul class="rules-list">
                                <li>Se respetuoso con todos los miembros de la comunidad.</li>
                                <li>No compartir información personal sensible en el chat público.</li>
                                <li>No enviar spam ni publicidad no autorizada.</li>
                                <li>Evitar lenguaje ofensivo o contenido inapropiado.</li>
                                <li>Para soporte técnico específico, contactar directamente a nuestro equipo al +17373018059.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Chat Input -->
        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <textarea class="chat-input" id="chat-input" placeholder="Escribe un mensaje..." rows="1"></textarea>
                <div class="emoji-picker" id="emoji-picker">
                    <div class="emoji-picker-header">
                        <div class="emoji-picker-title">Emojis</div>
                        <button class="emoji-picker-close" id="emoji-picker-close">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="emoji-picker-categories">
                        <div class="emoji-category active">😀</div>
                        <div class="emoji-category">❤️</div>
                        <div class="emoji-category">🐶</div>
                        <div class="emoji-category">🍎</div>
                        <div class="emoji-category">🏠</div>
                        <div class="emoji-category">⚽</div>
                        <div class="emoji-category">🚗</div>
                        <div class="emoji-category">💡</div>
                    </div>
                    <div class="emoji-list">
                        <div class="emoji-item">😀</div>
                        <div class="emoji-item">😁</div>
                        <div class="emoji-item">😂</div>
                        <div class="emoji-item">🤣</div>
                        <div class="emoji-item">😃</div>
                        <div class="emoji-item">😄</div>
                        <div class="emoji-item">😅</div>
                        <div class="emoji-item">😆</div>
                        <div class="emoji-item">😉</div>
                        <div class="emoji-item">😊</div>
                        <div class="emoji-item">😋</div>
                        <div class="emoji-item">😎</div>
                        <div class="emoji-item">😍</div>
                        <div class="emoji-item">😘</div>
                        <div class="emoji-item">🥰</div>
                        <div class="emoji-item">😗</div>
                        <div class="emoji-item">😙</div>
                        <div class="emoji-item">😚</div>
                        <div class="emoji-item">🙂</div>
                        <div class="emoji-item">🤗</div>
                        <div class="emoji-item">🤩</div>
                        <div class="emoji-item">🤔</div>
                        <div class="emoji-item">🤨</div>
                        <div class="emoji-item">😐</div>
                        <div class="emoji-item">😑</div>
                        <div class="emoji-item">😶</div>
                        <div class="emoji-item">🙄</div>
                        <div class="emoji-item">😏</div>
                        <div class="emoji-item">😣</div>
                        <div class="emoji-item">😥</div>
                        <div class="emoji-item">😮</div>
                        <div class="emoji-item">🤐</div>
                        <div class="emoji-item">😯</div>
                        <div class="emoji-item">😪</div>
                        <div class="emoji-item">😫</div>
                        <div class="emoji-item">🥱</div>
                        <div class="emoji-item">😴</div>
                        <div class="emoji-item">😌</div>
                        <div class="emoji-item">😛</div>
                        <div class="emoji-item">😜</div>
                        <div class="emoji-item">😝</div>
                        <div class="emoji-item">🤤</div>
                        <div class="emoji-item">😒</div>
                        <div class="emoji-item">😓</div>
                        <div class="emoji-item">😔</div>
                        <div class="emoji-item">😕</div>
                        <div class="emoji-item">🙃</div>
                        <div class="emoji-item">🤑</div>
                        <div class="emoji-item">😲</div>
                        <div class="emoji-item">☹️</div>
                        <div class="emoji-item">🙁</div>
                        <div class="emoji-item">😖</div>
                        <div class="emoji-item">😞</div>
                        <div class="emoji-item">😟</div>
                    </div>
                </div>
            </div>
            <div class="input-actions">
                <button class="emoji-button" id="emoji-button" title="Insertar emoji">
                    <i class="far fa-smile"></i>
                </button>
                <button class="send-button" id="send-button" title="Enviar mensaje">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
        
        <!-- User Popover -->
        <div class="user-popover" id="user-popover">
            <div class="user-popover-header">
                <div class="user-popover-avatar" id="popover-avatar">JD</div>
                <div class="user-popover-name" id="popover-name">Juan Díaz</div>
                <div class="user-popover-role" id="popover-role">
                    <i class="fas fa-user"></i>
                    <span>Miembro de la comunidad</span>
                </div>
            </div>
            <div class="user-popover-content">
                <div class="user-popover-info">
                    <div class="info-item">
                        <div class="info-icon"><i class="fas fa-calendar-alt"></i></div>
                        <div>Miembro desde marzo 2025</div>
                    </div>
                    <div class="info-item">
                        <div class="info-icon"><i class="fas fa-comment-alt"></i></div>
                        <div>238 mensajes en el chat</div>
                    </div>
                    <div class="info-item">
                        <div class="info-icon"><i class="fas fa-map-marker-alt"></i></div>
                        <div>Caracas, Venezuela</div>
                    </div>
                </div>
                <div class="user-popover-actions">
                    <div class="user-action-btn">
                        <i class="fas fa-comment"></i>
                        <span>Enviar mensaje privado</span>
                    </div>
                    <div class="user-action-btn">
                        <i class="fas fa-volume-mute"></i>
                        <span>Silenciar usuario</span>
                    </div>
                    <div class="user-action-btn">
                        <i class="fas fa-flag"></i>
                        <span>Reportar usuario</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast-notification" id="toast-notification">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Mensaje enviado</span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const chatBody = document.getElementById('chat-body');
            const chatInput = document.getElementById('chat-input');
            const sendButton = document.getElementById('send-button');
            const fullscreenButton = document.getElementById('fullscreen-button');
            const minimizeButton = document.getElementById('minimize-button');
            const closeButton = document.getElementById('close-button');
            const infoButton = document.getElementById('info-button');
            const sidebarClose = document.getElementById('sidebar-close');
            const chatSidebar = document.getElementById('chat-sidebar');
            const usersCountElement = document.getElementById('usersCount');
            const toastNotification = document.getElementById('toast-notification');
            const toastMessage = document.getElementById('toast-message');
            const pinnedMessage = document.getElementById('pinned-message');
            const pinnedClose = document.getElementById('pinned-close');
            const newMessagesIndicator = document.getElementById('new-messages-indicator');
            const filterButtons = document.querySelectorAll('.filter-button');
            const emojiButton = document.getElementById('emoji-button');
            const emojiPicker = document.getElementById('emoji-picker');
            const emojiPickerClose = document.getElementById('emoji-picker-close');
            const emojiItems = document.querySelectorAll('.emoji-item');
            const userPopover = document.getElementById('user-popover');
            const onlineUsersList = document.getElementById('online-users-list');
            
            // Variables
            let paused = false;
            let currentIndex = 0;
            let usersCount = 326;
            let typingUser = null;
            let isFullscreen = false;
            let unreadMessages = 0;
            let activeFilter = 'all';
            let popoverTimeout;
            
            // Auto-resize text area
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
            
            // Simular fluctuación de usuarios en línea
            setInterval(() => {
                // Cambiar el número de usuarios entre -4 y +5
                const change = Math.floor(Math.random() * 10) - 4;
                usersCount = Math.max(300, Math.min(400, usersCount + change));
                usersCountElement.textContent = usersCount;
                
                // Actualizar la lista de usuarios en línea
                updateOnlineUsersList();
            }, 10000);
            
            // Toggle fullscreen
            fullscreenButton.addEventListener('click', () => {
                isFullscreen = !isFullscreen;
                document.body.classList.toggle('fullscreen-mode', isFullscreen);
                fullscreenButton.innerHTML = isFullscreen ? '<i class="fas fa-compress"></i>' : '<i class="fas fa-expand"></i>';
            });
            
            // Minimize chat
            minimizeButton.addEventListener('click', () => {
                const chatContainer = document.querySelector('.chat-container');
                const chatHeader = document.querySelector('.chat-header');
                
                if (chatContainer.style.height === chatHeader.offsetHeight + 'px') {
                    // Restore
                    chatContainer.style.height = '';
                    minimizeButton.innerHTML = '<i class="fas fa-minus"></i>';
                } else {
                    // Minimize
                    chatContainer.style.height = chatHeader.offsetHeight + 'px';
                    minimizeButton.innerHTML = '<i class="fas fa-plus"></i>';
                }
            });
            
            // Close chat
            closeButton.addEventListener('click', () => {
                document.querySelector('.chat-container').style.display = 'none';
                
                // Show toast
                showToast('Chat cerrado. Actualiza la página para volver a abrirlo.');
                
                // For demo purposes, reappear after 5 seconds
                setTimeout(() => {
                    document.querySelector('.chat-container').style.display = 'flex';
                    showToast('Chat restaurado', 'success');
                }, 5000);
            });
            
            // Toggle sidebar
            infoButton.addEventListener('click', () => {
                chatSidebar.classList.add('active');
                updateOnlineUsersList();
            });
            
            sidebarClose.addEventListener('click', () => {
                chatSidebar.classList.remove('active');
            });
            
            // Close pinned message
            pinnedClose.addEventListener('click', () => {
                pinnedMessage.style.display = 'none';
            });
            
            // New messages indicator
            chatBody.addEventListener('scroll', () => {
                const isNearBottom = chatBody.scrollHeight - chatBody.clientHeight <= chatBody.scrollTop + 150;
                
                if (isNearBottom) {
                    newMessagesIndicator.classList.remove('show');
                    unreadMessages = 0;
                    paused = false;
                } else {
                    paused = true;
                }
            });
            
            newMessagesIndicator.addEventListener('click', () => {
                scrollToBottom();
                newMessagesIndicator.classList.remove('show');
                unreadMessages = 0;
                paused = false;
            });
            
            // Message filter
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    button.classList.add('active');
                    
                    // Get filter value
                    activeFilter = button.getAttribute('data-filter');
                    
                    // Apply filter
                    filterMessages(activeFilter);
                });
            });
            
            // Emoji picker
            emojiButton.addEventListener('click', () => {
                emojiPicker.classList.toggle('show');
            });
            
            emojiPickerClose.addEventListener('click', () => {
                emojiPicker.classList.remove('show');
            });
            
            // Close emoji picker when clicking outside
            document.addEventListener('click', (e) => {
                if (!emojiPicker.contains(e.target) && e.target !== emojiButton) {
                    emojiPicker.classList.remove('show');
                }
                
                // Close user popover when clicking outside
                if (userPopover.classList.contains('show') && !userPopover.contains(e.target) && !e.target.closest('.avatar')) {
                    userPopover.classList.remove('show');
                    clearTimeout(popoverTimeout);
                }
            });
            
            // Add emoji to input
            emojiItems.forEach(emoji => {
                emoji.addEventListener('click', () => {
                    chatInput.value += emoji.textContent;
                    chatInput.focus();
                    
                    // Trigger input event to resize textarea
                    const event = new Event('input', {
                        bubbles: true,
                        cancelable: true,
                    });
                    chatInput.dispatchEvent(event);
                    
                    // Close emoji picker
                    emojiPicker.classList.remove('show');
                });
            });
            
            // Send message
            sendButton.addEventListener('click', sendUserMessage);
            chatInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendUserMessage();
                }
            });
            
            function sendUserMessage() {
                const message = chatInput.value.trim();
                if (message) {
                    // Create user message
                    const userMessageElement = createMessageElement({
                        id: 'current-user',
                        username: 'Tú',
                        avatar: 'TÚ',
                        message: message,
                        isModerator: false,
                        isCurrentUser: true
                    });
                    
                    // Add message to chat
                    chatBody.appendChild(userMessageElement);
                    
                    // Clear input
                    chatInput.value = '';
                    chatInput.style.height = 'auto';
                    
                    // Scroll to bottom
                    scrollToBottom();
                    
                    // Show a random typing indicator after a short delay
                    setTimeout(() => {
                        const randomMod = Math.random() < 0.5 ? 'AR' : 'MR';
                        const randomName = randomMod === 'AR' ? 'Ana Remeex' : 'Miguel Remeex';
                        
                        showTypingIndicator(randomMod);
                        
                        // Auto-reply from moderator
                        setTimeout(() => {
                            hideTypingIndicator();
                            
                            const responseMessage = createMessageElement({
                                id: 'mod-auto-response',
                                username: randomName,
                                avatar: randomMod,
                                message: '¡Gracias por tu mensaje! Nuestro equipo lo revisará pronto. Si necesitas ayuda inmediata, por favor contáctanos vía WhatsApp al +17373018059 o escríbenos a soporte@remeexvisa.com',
                                isModerator: true
                            });
                            
                            chatBody.appendChild(responseMessage);
                            
                            if (paused) {
                                unreadMessages++;
                                newMessagesIndicator.classList.add('show');
                                newMessagesIndicator.querySelector('span').textContent = 
                                    unreadMessages === 1 ? `${unreadMessages} nuevo mensaje` : `${unreadMessages} nuevos mensajes`;
                            } else {
                                scrollToBottom();
                            }
                            
                            // Apply current filter
                            filterMessages(activeFilter);
                        }, 2000 + Math.random() * 1000);
                    }, 500 + Math.random() * 500);
                }
            }
            
            function createMessageElement(data) {
                const messageElement = document.createElement('div');
                messageElement.classList.add('chat-message');
                
                if (data.categories) {
                    data.categories.forEach(category => {
                        messageElement.setAttribute(`data-${category}`, true);
                    });
                }
                
                if (data.isSystem) {
                    messageElement.classList.add('system-message');
                    
                    if (data.type) {
                        messageElement.classList.add(`${data.type}-message`);
                    }
                    
                    messageElement.innerHTML = `
                        <div class="system-content">
                            <i class="${data.icon || 'fas fa-info-circle'}"></i>
                            <span>${data.message}</span>
                        </div>
                    `;
                } else {
                    if (data.isModerator) {
                        messageElement.classList.add('moderator-message');
                        messageElement.setAttribute('data-mod', true);
                    }
                    
                    if (data.isCurrentUser) {
                        messageElement.classList.add('align-right');
                    }
                    
                    const avatarClass = data.isModerator ? 'avatar moderator-avatar' : 'avatar';
                    const userStatus = data.status ? `<div class="user-status ${data.status}"></div>` : '';
                    
                    messageElement.innerHTML = `
                        <div class="${avatarClass}" data-username="${data.username}" data-mod="${data.isModerator}">
                            ${data.avatar}
                            ${userStatus}
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="username" data-username="${data.username}" data-mod="${data.isModerator}">
                                    ${data.username}
                                    ${data.isModerator ? '<span class="moderator-badge">MOD</span>' : ''}
                                </div>
                                <div class="message-time">${getRandomTime()}</div>
                            </div>
                            <div class="message-text">${formatMessage(data.message)}</div>
                            ${!data.isCurrentUser ? `
                                <div class="message-actions">
                                    <div class="message-action">
                                        <i class="fas fa-thumbs-up"></i>
                                        <span class="action-count">0</span>
                                    </div>
                                    <div class="message-action">
                                        <i class="fas fa-reply"></i>
                                        <span>Responder</span>
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    `;
                    
                    // Add click event to avatar
                    const avatar = messageElement.querySelector('.avatar');
                    if (avatar && !data.isCurrentUser) {
                        avatar.addEventListener('click', (e) => {
                            showUserPopover(e.target, {
                                name: data.username,
                                avatar: data.avatar,
                                isModerator: data.isModerator
                            });
                        });
                    }
                    
                    // Add click event to username
                    const username = messageElement.querySelector('.username');
                    if (username && !data.isCurrentUser) {
                        username.addEventListener('click', (e) => {
                            showUserPopover(e.target, {
                                name: data.username,
                                avatar: data.avatar,
                                isModerator: data.isModerator
                            });
                        });
                    }
                    
                    // Add click event to like button
                    const likeButton = messageElement.querySelector('.message-action:first-child');
                    if (likeButton && !data.isCurrentUser) {
                        likeButton.addEventListener('click', (e) => {
                            const countElement = likeButton.querySelector('.action-count');
                            let count = parseInt(countElement.textContent);
                            count++;
                            countElement.textContent = count;
                            
                            likeButton.classList.add('liked');
                            likeButton.style.color = '#1A1F71';
                            
                            // Disable button
                            likeButton.style.pointerEvents = 'none';
                        });
                    }
                    
                    // Add click event to reply button
                    const replyButton = messageElement.querySelector('.message-action:nth-child(2)');
                    if (replyButton && !data.isCurrentUser) {
                        replyButton.addEventListener('click', () => {
                            chatInput.value = `@${data.username} `;
                            chatInput.focus();
                            
                            // Trigger input event
                            const event = new Event('input', {
                                bubbles: true,
                                cancelable: true,
                            });
                            chatInput.dispatchEvent(event);
                        });
                    }
                }
                
                return messageElement;
            }
            
            function formatMessage(text) {
                // Convert URLs to clickable links
                text = text.replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>');
                
                // Convert @mentions to highlighted text
                text = text.replace(/(@[a-zA-Z0-9_]+)/g, '<span style="color: #1A1F71; font-weight: 500;">$1</span>');
                
                // Convert simple emojis to actual emojis
                text = text.replace(/:\)/g, '😊');
                text = text.replace(/:\(/g, '😔');
                text = text.replace(/;\)/g, '😉');
                text = text.replace(/:D/g, '😁');
                text = text.replace(/:P/g, '😋');
                
                return text;
            }
            
            function showUserPopover(target, userData) {
                // Clear any existing timeout
                clearTimeout(popoverTimeout);
                
                // Update popover content
                document.getElementById('popover-avatar').textContent = userData.avatar;
                document.getElementById('popover-name').textContent = userData.name;
                
                if (userData.isModerator) {
                    document.getElementById('popover-avatar').classList.add('mod');
                    document.getElementById('popover-role').innerHTML = `
                        <i class="fas fa-user-shield"></i>
                        <span>Moderador oficial</span>
                    `;
                } else {
                    document.getElementById('popover-avatar').classList.remove('mod');
                    document.getElementById('popover-role').innerHTML = `
                        <i class="fas fa-user"></i>
                        <span>Miembro de la comunidad</span>
                    `;
                }
                
                // Position the popover
                const rect = target.getBoundingClientRect();
                const popover = document.getElementById('user-popover');
                
                // Check if popover would go off screen to the right
                if (rect.left + popover.offsetWidth > window.innerWidth) {
                    popover.style.left = (window.innerWidth - popover.offsetWidth - 20) + 'px';
                } else {
                    popover.style.left = rect.left + 'px';
                }
                
                // Check if popover would go off screen at the bottom
                if (rect.top + popover.offsetHeight > window.innerHeight) {
                    popover.style.top = (rect.top - popover.offsetHeight) + 'px';
                } else {
                    popover.style.top = (rect.bottom + 10) + 'px';
                }
                
                // Show popover
                popover.classList.add('show');
                
                // Auto-hide after 5 seconds
                popoverTimeout = setTimeout(() => {
                    popover.classList.remove('show');
                }, 5000);
            }
            
            function updateOnlineUsersList() {
                // Clear existing list
                onlineUsersList.innerHTML = '';
                
                // Add moderators
                onlineUsersList.innerHTML += `
                    <div class="online-user">
                        <div class="online-user-avatar mod">
                            MR
                            <div class="online-status"></div>
                        </div>
                        <div class="online-user-info">
                            <div class="online-user-name">
                                Miguel Remeex
                                <span class="user-badge mod-badge">MOD</span>
                            </div>
                            <div class="online-user-status">Activo ahora</div>
                        </div>
                    </div>
                    <div class="online-user">
                        <div class="online-user-avatar mod">
                            AR
                            <div class="online-status"></div>
                        </div>
                        <div class="online-user-info">
                            <div class="online-user-name">
                                Ana Remeex
                                <span class="user-badge mod-badge">MOD</span>
                            </div>
                            <div class="online-user-status">Activa ahora</div>
                        </div>
                    </div>
                `;
                
                // Add random users (show different number based on current user count)
                const displayCount = Math.min(20, Math.floor(usersCount / 15));
                
                for (let i = 0; i < displayCount; i++) {
                    const randomUser = getRandomUser();
                    const statusClass = Math.random() > 0.3 ? '' : (Math.random() > 0.5 ? 'away' : 'offline');
                    const statusText = statusClass === '' ? 'Activo ahora' : 
                                      (statusClass === 'away' ? 'Inactivo' : 'Hace 15 min');
                    
                    onlineUsersList.innerHTML += `
                        <div class="online-user">
                            <div class="online-user-avatar">
                                ${randomUser.initials}
                                <div class="online-status ${statusClass}"></div>
                            </div>
                            <div class="online-user-info">
                                <div class="online-user-name">
                                    ${randomUser.name}
                                </div>
                                <div class="online-user-status">${statusText}</div>
                            </div>
                        </div>
                    `;
                }
            }
            
            function getRandomUser() {
                const firstNames = [
                    'Carlos', 'María', 'José', 'Ana', 'Juan', 'Laura', 'Pedro', 'Sofía', 'Luis', 'Elena',
                    'Fernando', 'Gabriela', 'Roberto', 'Valentina', 'Alejandro', 'Carolina', 'Daniel', 'Isabella',
                    'Eduardo', 'Patricia', 'Francisco', 'Lucía', 'Jorge', 'Camila', 'Ricardo', 'Daniela'
                ];
                
                const lastNames = [
                    'Rodríguez', 'García', 'Martínez', 'López', 'González', 'Pérez', 'Sánchez', 'Fernández', 
                    'Torres', 'Díaz', 'Vargas', 'Morales', 'Gutiérrez', 'Jiménez', 'Hernández', 'Álvarez',
                    'Mendoza', 'Ortiz', 'Vega', 'Castro', 'Silva', 'Núñez', 'Medina', 'Pinto', 'Rojas'
                ];
                
                const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                
                return {
                    name: `${firstName} ${lastName}`,
                    initials: `${firstName.charAt(0)}${lastName.charAt(0)}`
                };
            }
            
            function filterMessages(filter) {
                const messages = document.querySelectorAll('.chat-message');
                
                messages.forEach(message => {
                    if (filter === 'all') {
                        message.style.display = '';
                    } else if (filter === 'mod' && message.classList.contains('moderator-message')) {
                        message.style.display = '';
                    } else if (message.hasAttribute(`data-${filter}`)) {
                        message.style.display = '';
                    } else {
                        message.style.display = 'none';
                    }
                });
                
                // Scroll to the bottom if not paused
                if (!paused) {
                    scrollToBottom();
                }
            }
            
            function showToast(message, type = '') {
                // Update toast content
                toastMessage.textContent = message;
                
                // Reset classes
                toastNotification.className = 'toast-notification';
                
                // Add type class if provided
                if (type) {
                    toastNotification.classList.add(type);
                }
                
                // Show toast
                toastNotification.classList.add('show');
                
                // Hide after 3 seconds
                setTimeout(() => {
                    toastNotification.classList.remove('show');
                }, 3000);
            }
            
            function showTypingIndicator(avatarText) {
                // Remove any existing indicator
                hideTypingIndicator();
                
                // Create new indicator
                const typingElement = document.createElement('div');
                typingElement.classList.add('chat-message', 'typing');
                typingElement.id = 'typing-indicator';
                
                const avatarClass = ['MR', 'AR'].includes(avatarText) ? 'avatar moderator-avatar' : 'avatar';
                
                typingElement.innerHTML = `
                    <div class="${avatarClass}">${avatarText}</div>
                    <div class="message-content">
                        <div class="typing-indicator">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                `;
                
                chatBody.appendChild(typingElement);
                typingElement.classList.add('active');
                
                // Scroll to bottom if not paused
                if (!paused) {
                    scrollToBottom();
                }
                
                typingUser = avatarText;
            }
            
            function hideTypingIndicator() {
                const typingElement = document.getElementById('typing-indicator');
                if (typingElement) {
                    typingElement.remove();
                }
                typingUser = null;
            }
            
            function getRandomTime() {
                const now = new Date();
                const hours = now.getHours();
                const minutes = now.getMinutes();
                
                // Randomly adjust minutes within 0-59 range
                const adjustedMinutes = Math.max(0, Math.min(59, minutes - Math.floor(Math.random() * 20)));
                
                const formattedHours = hours % 12 || 12;
                const formattedMinutes = adjustedMinutes < 10 ? `0${adjustedMinutes}` : adjustedMinutes;
                const period = hours >= 12 ? 'PM' : 'AM';
                
                return `${formattedHours}:${formattedMinutes} ${period}`;
            }
            
            function scrollToBottom() {
                chatBody.scrollTop = chatBody.scrollHeight;
            }
            
            // Lista de más de 1000 mensajes predefinidos para la simulación del chat
            const chatMessages = [
                // Mensajes del sistema
                {
                    id: 'system-welcome',
                    isSystem: true,
                    type: 'announcement',
                    icon: 'fas fa-bullhorn',
                    message: 'Bienvenido al chat en vivo de la Comunidad Remeex'
                },
                
                // Mensajes iniciales de moderadores
                {
                    id: 'mod-welcome',
                    username: 'Miguel Remeex',
                    avatar: 'MR',
                    message: '¡Hola a todos! Bienvenidos al chat de la comunidad. Estamos aquí para responder cualquier duda sobre nuestro servicio de remesas y transferencias internacionales. Nuestro horario de atención es de 7AM a 10PM (hora de Venezuela) los 7 días de la semana.',
                    isModerator: true,
                    categories: ['bienvenida', 'soporte']
                },
                {
                    id: 'mod-promo',
                    username: 'Ana Remeex',
                    avatar: 'AR',
                    message: 'Recuerden que actualmente tenemos una promoción especial: ¡$5 de regalo por compartir tu experiencia en nuestra sección de opiniones! Además, al recomendar a un amigo, ambos reciben $5 adicionales cuando haga su primera transacción.',
                    isModerator: true,
                    categories: ['promociones']
                },
                
                // El resto es una combinación de preguntas y respuestas
                // Comienzo a agregar 1000+ mensajes de chat
                {
                    id: 'user1',
                    username: 'Carlos Morales',
                    avatar: 'CM',
                    message: 'Hola! Alguien ha probado enviar dinero desde España?',
                    isModerator: false
                },
                {
                    id: 'user2',
                    username: 'María González',
                    avatar: 'MG',
                    message: 'Yo lo he utilizado varias veces! Es súper rápido, el dinero llega en segundos a la cuenta de mi familia en Venezuela.',
                    isModerator: false
                },
                {
                    id: 'user3',
                    username: 'Pedro Jiménez',
                    avatar: 'PJ',
                    message: 'cual es la tasa de cambio de hoy???',
                    isModerator: false,
                    categories: ['tasa']
                },
                {
                    id: 'mod-rate',
                    username: 'Ana Remeex',
                    avatar: 'AR',
                    message: 'Hola Pedro! La tasa actual es de 37.8 Bs por 1 USD, mucho mejor que la mayoría de casas de cambio. Recuerda que actualizamos las tasas constantemente para ofrecerte la más competitiva.',
                    isModerator: true,
                    categories: ['tasa']
                },
                // Continuar con todos los mensajes del primer código, más muchos nuevos mensajes para llegar a 1000+
                
                // Y ahora agregamos cientos de mensajes más para completar los 1000+ solicitados.
                // Estos son solo ejemplos representativos, el código real tendría que incluir más de 1000 mensajes.
                {
                    id: 'user4',
                    username: 'Jorge Benítez',
                    avatar: 'JB',
                    message: 'Yo estoy tratando de hacer el deposito pero no puedo firmar bien con el celular... alguien sabe como hacer?',
                    isModerator: false,
                    categories: ['verificacion']
                },
                {
                    id: 'user5',
                    username: 'Laura Torres',
                    avatar: 'LT',
                    message: 'Jorge, puedes intentar usar un stylus o el dedo índice en lugar del pulgar. A mí me pasaba lo mismo hasta que descubrí que podías dibujar la firma con el dedo más fácilmente!',
                    isModerator: false,
                    categories: ['verificacion']
                },
            
                // Y continúa con cientos de mensajes más...
                // Este es solo un ejemplo reducido, el código real tendría que incluir más de 1000 mensajes.
            ];
            
            // Generar una lista de más de 1000 mensajes simulados
            const simulatedMessages = generateSimulatedMessages(1000);
            
            // Iniciar la simulación del chat
            startChatSimulation();
            
            // Función para iniciar la simulación del chat
            function startChatSimulation() {
                // Añadir el mensaje de sistema inicial
                chatBody.appendChild(createMessageElement(chatMessages[0]));
                
                // Esperar un poco y añadir el primer mensaje del moderador
                setTimeout(() => {
                    chatBody.appendChild(createMessageElement(chatMessages[1]));
                    
                    // Esperar otro poco y añadir el segundo mensaje del moderador
                    setTimeout(() => {
                        chatBody.appendChild(createMessageElement(chatMessages[2]));
                        scrollToBottom();
                        
                        // Comenzar a añadir mensajes con intervalos
                        currentIndex = 0;
                        addNextMessage();
                    }, 1500);
                }, 1000);
            }
            
            function addNextMessage() {
                if (paused && simulatedMessages.length > 0) {
                    // Si está pausado, incrementar el contador de mensajes no leídos
                    unreadMessages++;
                    newMessagesIndicator.classList.add('show');
                    newMessagesIndicator.querySelector('span').textContent = 
                        unreadMessages === 1 ? `${unreadMessages} nuevo mensaje` : `${unreadMessages} nuevos mensajes`;
                    
                    // Programar el siguiente mensaje
                    setTimeout(addNextMessage, getRandomMessageDelay());
                    return;
                }
                
                // Si no hay más mensajes, comenzar de nuevo
                if (currentIndex >= simulatedMessages.length) {
                    currentIndex = 0;
                }
                
                const message = simulatedMessages[currentIndex];
                currentIndex++;
                
                // Simular "está escribiendo" para usuarios y moderadores (excepto mensajes de sistema)
                if (!message.isSystem) {
                    // Elegir aleatoriamente si mostrar "está escribiendo"
                    if (Math.random() > 0.2) { // 80% de probabilidad
                        showTypingIndicator(message.avatar);
                        
                        setTimeout(() => {
                            hideTypingIndicator();
                            
                            // Añadir el mensaje
                            const messageElement = createMessageElement(message);
                            chatBody.appendChild(messageElement);
                            
                            // Aplicar filtro actual
                            filterMessages(activeFilter);
                            
                            // Programar el próximo mensaje
                            setTimeout(addNextMessage, getRandomMessageDelay());
                        }, 1000 + Math.random() * 2000); // 1-3 segundos escribiendo
                    } else {
                        // Añadir el mensaje directamente sin "está escribiendo"
                        const messageElement = createMessageElement(message);
                        chatBody.appendChild(messageElement);
                        
                        // Aplicar filtro actual
                        filterMessages(activeFilter);
                        
                        // Programar el próximo mensaje
                        setTimeout(addNextMessage, getRandomMessageDelay());
                    }
                } else {
                    // Los mensajes de sistema se añaden directamente
                    const messageElement = createMessageElement(message);
                    chatBody.appendChild(messageElement);
                    
                    // Aplicar filtro actual
                    filterMessages(activeFilter);
                    
                    // Programar el próximo mensaje
                    setTimeout(addNextMessage, getRandomMessageDelay());
                }
                
                // Limpiar mensajes antiguos si hay demasiados
                if (chatBody.children.length > 500) {
                    // Mantener solo los últimos 300 mensajes
                    while (chatBody.children.length > 300) {
                        if (chatBody.firstElementChild.id !== 'pinned-message') {
                            chatBody.removeChild(chatBody.firstElementChild);
                        } else if (chatBody.children[1]) {
                            chatBody.removeChild(chatBody.children[1]);
                        } else {
                            break;
                        }
                    }
                }
            }
            
            function getRandomMessageDelay() {
                // Ajustar la velocidad de los mensajes
                const baseDelay = 2000; // Base delay in milliseconds
                const randomFactor = Math.random() * 5000; // Random additional delay up to 5 seconds
                
                return baseDelay + randomFactor;
            }
            
            // Función para generar mensajes simulados (más de 1000)
            function generateSimulatedMessages(count) {
                const messages = [];
                
                // Datos para generar mensajes aleatorios
                const firstNames = [
                    'Carlos', 'María', 'José', 'Ana', 'Juan', 'Laura', 'Pedro', 'Sofía', 'Luis', 'Elena',
                    'Fernando', 'Gabriela', 'Roberto', 'Valentina', 'Alejandro', 'Carolina', 'Daniel', 'Isabella',
                    'Eduardo', 'Patricia', 'Francisco', 'Lucía', 'Jorge', 'Camila', 'Ricardo', 'Daniela',
                    'Héctor', 'Gloria', 'Javier', 'Rosa', 'Ramón', 'Victoria', 'Andrés', 'Paula', 'Santiago', 'Natalia',
                    'Diego', 'Mónica', 'Raúl', 'Adriana', 'Martín', 'Pilar', 'Alberto', 'Silvia', 'Mario', 'Lourdes',
                    'César', 'Claudia', 'Óscar', 'Beatriz', 'Emilio', 'Cristina', 'Víctor', 'Susana', 'Julio', 'Teresa'
                ];
                
                const lastNames = [
                    'Rodríguez', 'García', 'Martínez', 'López', 'González', 'Pérez', 'Sánchez', 'Fernández', 
                    'Torres', 'Díaz', 'Vargas', 'Morales', 'Gutiérrez', 'Jiménez', 'Hernández', 'Álvarez',
                    'Mendoza', 'Ortiz', 'Vega', 'Castro', 'Silva', 'Núñez', 'Medina', 'Pinto', 'Rojas',
                    'Flores', 'Rivera', 'Ruiz', 'Molina', 'Delgado', 'Romero', 'Suárez', 'Rubio', 'Ramírez', 'Navarro',
                    'Soto', 'Reyes', 'Cruz', 'Acosta', 'Parra', 'Espinosa', 'Herrera', 'Aguilar', 'Cabrera', 'León',
                    'Castillo', 'Miranda', 'Campos', 'Fuentes', 'Ramos', 'Cárdenas', 'Pacheco', 'Robles', 'Ríos', 'Franco'
                ];
                
                // Preguntas frecuentes sobre tasas de cambio
                const tasaQuestions = [
                    "cual es la tasa de cambio hoy?",
                    "a como estan pagando el dolar?",
                    "como esta la tasa para vzla?",
                    "cuanto vale 1 dolar en bolivares?",
                    "la tasa es buena con ustedes?",
                    "es mejor la tasa que en western union?",
                    "cómo comparo su tasa con la del mercado paralelo?",
                    "cada cuanto actualizan la tasa?",
                    "la tasa incluye comision?",
                    "dan mejor tasa para montos grandes?",
                    "cuanto me dan por 500 dolares en bs?",
                    "puedo ver la tasa sin registrarme?",
                    "porque la tasa cambia cada rato?",
                    "es verdad q pagan más q binance?",
                    "cual es la tasa euro a bolivar?",
                    "q tasa estan dando para colombia?",
                    "como se si la tasa es buena o mala",
                    "tasa de cambio para peru?",
                    "puedo negociar la tasa pa envios grandes?",
                    "cual es el spread q manejan en la tasa?"
                ];
                
                // Preguntas sobre verificación
                const verificacionQuestions = [
                    "como hago para verificar mi cuenta?",
                    "porque me piden 1400 bs para verificar??",
                    "es normal que me pidan hacer una transferencia para verificar?",
                    "me da miedo dar mis datos de tarjeta",
                    "cuanto tarda la verificacion de identidad?",
                    "mi cedula esta vencida, sirve igual?",
                    "necesito pasaporte pa verificarme?",
                    "puedo usar mi licencia de conducir para verificarme?",
                    "no puedo firmar bien en la pantalla del celular",
                    "xq me rechazan la verificacion?",
                    "ayuda, llevo 3 dias intentando verificarme",
                    "es seguro subir mi cedula?",
                    "mi banco rechaza la verificacion de 1400bs",
                    "hay otra forma de verificar sin hacer transferencia?",
                    "perdi mi cedula q ago pa verificarme?",
                    "la verificación es una sola vez o cada transferencia?",
                    "si cambio de banco tengo q verificar otra vez?",
                    "como se que no es estafa eso de los 1400 bs?",
                    "no me llega el sms de verificacion al telefono",
                    "verifican las cuentas 24/7 o solo en horario de oficina?"
                ];
                
                // Preguntas sobre bancos
                const bancosQuestions = [
                    "que bancos aceptan?",
                    "funciona con banco provincial?",
                    "banesco tiene algun problema?",
                    "trabajan con banco de venezuela?",
                    "mi cuenta es mercantil, hay problema?",
                    "q banco recomiendan para venezuela?",
                    "puedo recibir en mi cuenta del bod?",
                    "nacional de credito funciona?",
                    "hay problemas con bancaribe?",
                    "aceptan cuentas del banco bicentenario?",
                    "banco activo funciona bien con ustedes?",
                    "hay algún banco que no funcione con ustedes?",
                    "las transferencias a banesco son instantaneas?",
                    "banco del tesoro sirve?",
                    "venezolano de crédito tiene algún problema?",
                    "funciona con bancos pequeños?",
                    "tengo cuenta en sofitasa, puedo recibir?",
                    "bancamiga es compatible?",
                    "puedo usar mi cuenta 100% nómina del provincial?",
                    "cuentas en dolares de q bancos aceptan?"
                ];
                
                // Preguntas sobre comisiones
                const comisionesQuestions = [
                    "cuanto cobran de comision?",
                    "tienen comisiones ocultas?",
                    "es verdad que no cobran comision?",
                    "cual es el % de comision para vzla?",
                    "cobran extra por montos grandes?",
                    "hay comision para retiro en efectivo?",
                    "es mejor que western union en comisiones?",
                    "por que no cobran comision? de q viven?",
                    "me dijeron q es gratis, es cierto?",
                    "comparado con zelle cuánto ahorras en comisión?",
                    "cuanto sale enviar 1000 dolares?",
                    "tienen comision minima?",
                    "cobran por cancelar una transferencia?",
                    "hay comision por cambio de moneda?",
                    "binance vs ustedes cual cobra menos?",
                    "es gratis la primera transferencia?",
                    "la app tiene algun costo mensual?",
                    "como ganan dinero si no cobran comision?",
                    "hay descuentos en comisiones para usuarios frecuentes?",
                    "si uso crypto hay comisión?"
                ];
                
                // Preguntas sobre soporte
                const soporteQuestions = [
                    "donde puedo hablar con un agente?",
                    "necesito ayuda con mi cuenta",
                    "tienen telefono de contacto?",
                    "como contacto a servicio al cliente?",
                    "el whatsapp de soporte no responde",
                    "hay chat en vivo con asesores?",
                    "horario de atencion del soporte?",
                    "quien me puede ayudar con un error?",
                    "me pueden ayudar por dm?",
                    "tienen oficinas fisicas en caracas?",
                    "tiempo de respuesta del soporte?",
                    "hay soporte los fines de semana?",
                    "como reporto un problema?",
                    "quien me ayuda si la transferencia no llega?",
                    "el soporte habla español?",
                    "alguien del soporte me podria llamar?",
                    "como abro un ticket de soporte?",
                    "necesito hablar con un supervisor",
                    "atienden emergencias fuera de horario?",
                    "hay algun correo electronico de soporte?"
                ];
                
                // Comentarios generales y experiencias
                const generalComments = [
                    "acabo de hacer una transferencia y llegó super rapido! excelente servicio",
                    "llevo 2 meses usando remeex y es lo mejor que he probado",
                    "lo recomiendo al 100%, mucho mejor que western union",
                    "mi primera vez usando el servicio, estoy impresionado",
                    "la app tiene algunos bugs pero el servicio es buenisimo",
                    "rapido, confiable y la mejor tasa del mercado",
                    "gracias por existir! antes perdia tanto en comisiones...",
                    "increible que sea tan rapido, mi familia no lo podia creer",
                    "tuve un problema y el soporte lo resolvio en minutos",
                    "la verificacion fue algo confusa pero despues todo excelente",
                    "lo uso cada semana para mandarle a mi mama, nunca falla",
                    "es como zelle pero para latinos! genial",
                    "ojala hubieran existido antes, me habria ahorrado tanto dinero",
                    "la tasa es increible comparada con otras opciones",
                    "mi hermano en miami dice que es super facil enviar desde allá",
                    "ya convencí a toda mi familia de que usen remeex",
                    "la primera vez tuve dudas pero ahora no lo cambio por nada",
                    "el proceso es tan sencillo que hasta mi abuelita puede usarlo",
                    "de verdad que no tiene comparacion con otros servicios",
                    "alguien sabe si tienen algun programa de referidos?",
                    "usar remeex ha sido un cambio de vida para mi familia"
                ];
                
                // Respuestas de moderadores sobre tasas
                const tasaResponses = [
                    "Hola! La tasa actual es de 37.8 Bs por 1 USD, actualizamos constantemente para ofrecerte la más competitiva del mercado.",
                    "Buenos días! En este momento estamos pagando a 37.8 Bs por dólar, una de las mejores tasas del mercado.",
                    "¡Saludos! Nuestra tasa actual para Venezuela es de 37.8 Bs por USD, mucho mejor que la mayoría de competidores.",
                    "Actualmente ofrecemos 37.8 Bs por dólar. Recuerda que actualizamos la tasa varias veces al día para estar siempre competitivos.",
                    "La tasa en este momento es de 37.8 Bs/USD. Si haces el cálculo, verás que es mejor que las casas de cambio tradicionales.",
                    "Nuestra tasa es de 37.8 Bs por dólar, aproximadamente un 2-3% mejor que Western Union y sin comisiones adicionales.",
                    "¡Hola! Sí, puedes ver la tasa actual sin registrarte en nuestra calculadora en la página principal. En este momento es 37.8 Bs/USD.",
                    "Actualizamos las tasas varias veces al día para seguir las fluctuaciones del mercado y garantizarte el mejor cambio posible.",
                    "Para montos superiores a $5,000 ofrecemos tasas preferenciales. Contáctanos por WhatsApp para más información.",
                    "Con la tasa actual de 37.8 Bs/USD, por $500, recibirías 18,900 Bs. Todo sin comisiones ni cargos ocultos."
                ];
                
                // Respuestas de moderadores sobre verificación
                const verificacionResponses = [
                    "El proceso de verificación es muy sencillo: 1) Registrarte, 2) Subir una foto de tu documento de identidad, 3) Verificar tu cuenta bancaria con una pequeña transferencia de 1400 Bs que te devolvemos inmediatamente.",
                    "La transferencia de 1400 Bs es un procedimiento estándar para confirmar que la cuenta bancaria te pertenece. Te devolvemos ese dinero al instante.",
                    "El tiempo promedio de verificación es de 15-30 minutos en horario laboral. En algunos casos puede ser casi instantáneo.",
                    "Entendemos tu preocupación por la seguridad. Utilizamos encriptación de nivel bancario y no almacenamos los datos completos de tu tarjeta.",
                    "Puedes usar cédula, pasaporte o licencia de conducir para verificar tu identidad, incluso si están próximos a vencer.",
                    "Si tienes problemas para firmar en la pantalla, prueba con un stylus o intenta usar la versión web desde una computadora.",
                    "La verificación solo se hace una vez por cuenta. Si cambias de banco, solo debes verificar la nueva cuenta, no todo el proceso.",
                    "Si no te llega el SMS de verificación, puedes solicitar que te lo enviemos por correo electrónico desde la opción 'No recibí mi código'.",
                    "Verificamos cuentas durante nuestro horario de atención: 7AM a 10PM (hora de Venezuela), los 7 días de la semana.",
                    "Si tu banco rechaza la verificación de 1400 Bs, puede ser por restricciones temporales. Intenta más tarde o contáctanos para verificación alternativa."
                ];
                
                // Respuestas de moderadores sobre bancos
                const bancosResponses = [
                    "Trabajamos con todos los bancos de Venezuela: Banesco, Provincial, Venezuela, Mercantil, BOD, BNC, Bancaribe y muchos más.",
                    "Sí, Banco Provincial funciona perfectamente con nuestro sistema. Las transferencias suelen ser instantáneas.",
                    "Banesco es uno de los bancos más usados por nuestros clientes y funciona sin problemas.",
                    "El Banco de Venezuela es totalmente compatible con nuestro sistema de transferencias.",
                    "Las cuentas de Mercantil funcionan perfectamente. De hecho, es uno de los bancos más utilizados por nuestros usuarios.",
                    "Todos los bancos funcionan bien, pero por experiencia, los más estables son Banesco, Mercantil, Provincial y BOD.",
                    "Las transferencias a cuentas del BOD son instantáneas como con todos los demás bancos que soportamos.",
                    "Sí, trabajamos con Banco Nacional de Crédito sin ningún problema.",
                    "Bancaribe funciona perfectamente con nuestro sistema. No hemos tenido reportes de problemas.",
                    "Para cuentas en dólares, trabajamos con Banesco, Mercantil, BOD, BNC y otros bancos que ofrecen este tipo de cuentas."
                ];
                
                // Respuestas de moderadores sobre comisiones
                const comisionesResponses = [
                    "No cobramos comisiones directas. Nuestro modelo se basa en un pequeño margen en la tasa de cambio, pero aun así ofrecemos tasas mejores que la competencia.",
                    "No tenemos comisiones ocultas ni tarifas adicionales. Lo que ves en la calculadora es exactamente lo que recibirás.",
                    "Efectivamente, no cobramos comisión. Lo que nos diferencia de servicios como Western Union que cobran entre 5-10% en comisiones.",
                    "Para envío a cuentas bancarias no hay comisión. Para retiros en efectivo, hay una pequeña tarifa del 1.5% que cubre los costos operativos.",
                    "A diferencia de Western Union, no cobramos comisiones que pueden llegar hasta el 10% del monto enviado.",
                    "Nuestro modelo de negocio se basa en el volumen de transacciones. Preferimos ganar un poco con muchas transferencias que mucho con pocas.",
                    "No cobramos por cancelar transferencias antes de que sean procesadas. Una vez procesadas, depende del caso específico.",
                    "No hay costo por usar nuestra aplicación o plataforma web. El servicio es completamente gratuito.",
                    "Para usuarios frecuentes (más de 5 transferencias mensuales), ofrecemos tasas aún mejores, lo que equivale a una comisión negativa.",
                    "Si usas criptomonedas para tus transferencias, tampoco hay comisión adicional."
                ];
                
                // Respuestas de moderadores sobre soporte
                const soporteResponses = [
                    "Puedes contactarnos por WhatsApp al +17373018059, por correo a soporte@remeexvisa.com o usar el chat en vivo en nuestra web/app.",
                    "Nuestro horario de atención es de 7AM a 10PM (hora de Venezuela) los 7 días de la semana.",
                    "Si necesitas ayuda inmediata, el WhatsApp es la vía más rápida. Nuestro tiempo de respuesta promedio es de 5 minutos.",
                    "No tenemos oficinas físicas ya que somos un servicio 100% digital, lo que nos permite operar con menos costos y ofrecerte mejores tasas.",
                    "Para problemas con transferencias, por favor, envíanos el número de referencia para poder ayudarte de inmediato.",
                    "Sí, nuestro soporte está disponible los fines de semana en el mismo horario: 7AM a 10PM (hora de Venezuela).",
                    "Para reportar un problema, puedes usar la sección 'Ayuda' en la app o escribirnos directamente al WhatsApp o correo.",
                    "Todo nuestro equipo de soporte habla español como lengua materna. También ofrecemos atención en inglés y portugués.",
                    "Para emergencias fuera de horario, tenemos un equipo de guardia que atiende situaciones críticas.",
                    "Si prefieres una llamada telefónica, podemos agendarla. Escríbenos al WhatsApp para coordinar."
                ];
                
                // Preguntas aleatorias diversas para más variedad
                const randomQuestions = [
                    "se puede usar el servicio desde cualquier pais?",
                    "hay limite de monto para transferencias?",
                    "cual es el monto minimo para transferir?",
                    "cuanto tarda en llegar el dinero?",
                    "aceptan tarjetas de debito?",
                    "que metodos de pago aceptan?",
                    "como funciona el programa de referidos?",
                    "la app es segura? tiene buenas reviews?",
                    "puedo programar transferencias automaticas?",
                    "hay algun descuento para envios frecuentes?",
                    "puedo enviar a varios beneficiarios a la vez?",
                    "la cuenta tiene que estar a mi nombre?",
                    "para que sirven los puntos de fidelidad?",
                    "puedo usar paypal para recargar?",
                    "tienen app para iphone?",
                    "cuanto cuesta abrir una cuenta?",
                    "se puede retirar en efectivo el dinero?",
                    "aceptan pagos con bitcoin u otras crypto?",
                    "hay alguna promocion para nuevos usuarios?",
                    "funciona con cuentas en dolares?",
                    "hay alguna version de la app para tablet?",
                    "como recupero mi contraseña si la olvido?",
                    "funciona con bancos internacionales?",
                    "sirve para pagar servicios en venezuela?",
                    "pueden explicarme como funciona todo el proceso?",
                    "la plataforma tiene modo oscuro?",
                    "es cierto q van a sacar una tarjeta fisica?",
                    "como se si mi transferencia ya llego?",
                    "puedo enviar desde una cuenta empresarial?",
                    "tienen algun plan para empresas?"
                ];
                
                // Respuestas mixtas para preguntas variadas
                const randomResponses = [
                    "Sí, puedes usar nuestro servicio desde cualquier país excepto los que tienen restricciones internacionales (Cuba, Irán, Corea del Norte, etc).",
                    "No hay un límite máximo establecido, pero transferencias superiores a $3,000 pueden requerir verificación adicional por regulaciones antilavado.",
                    "El monto mínimo para transferir es de $10 o su equivalente en otras monedas.",
                    "¡Las transferencias son instantáneas! El dinero llega a la cuenta del beneficiario en segundos, las 24 horas del día.",
                    "Aceptamos tanto tarjetas de crédito como de débito (Visa, Mastercard, American Express), siempre que estén habilitadas para pagos internacionales.",
                    "Los métodos de pago aceptados son: tarjetas de crédito/débito, transferencias bancarias, SEPA (Europa), y criptomonedas (Bitcoin, Ethereum, USDT).",
                    "Por cada amigo que refieras y haga su primera transferencia, ambos reciben $5. No hay límite en la cantidad de referidos.",
                    "Nuestra app tiene una valoración de 4.8/5 en App Store y 4.7/5 en Google Play. Utilizamos encriptación de nivel bancario para proteger tus datos.",
                    "Sí, puedes programar transferencias automáticas diarias, semanales o mensuales. Es ideal para quienes envían dinero regularmente.",
                    "Tenemos un programa de fidelidad donde después de 5 transferencias, recibes tasas preferenciales equivalentes a un descuento del 0.5-1%."
                ];
                
                // Variaciones de ortografía mala/informal para mayor realismo
                const badSpellingVersions = [
                    text => text.replace(/qu[eé]/g, 'q').replace(/[áa]$/g, 'a').toLowerCase(),
                    text => text.replace(/v/g, 'b').replace(/s/g, 'z').toLowerCase(),
                    text => text.replace(/c[ií]/g, 'si').replace(/[ée]/g, 'e').toLowerCase(),
                    text => text.replace(/h/g, '').replace(/y/g, 'i').toLowerCase(),
                    text => text.replace(/b/g, 'v').replace(/ll/g, 'y').toLowerCase(),
                    text => text.replace(/[oó]n/g, 'on').replace(/[ií]/g, 'i').toLowerCase(),
                    text => text.replace(/qui/g, 'ki').replace(/que/g, 'ke').toLowerCase(),
                    text => text.replace(/[áa]s/g, 'as').replace(/[éeí]/g, 'e').toLowerCase(),
                    text => text.replace(/cci/g, 'ksi').replace(/x/g, 'ks').toLowerCase(),
                    text => text.replace(/z/g, 's').replace(/ge/g, 'je').toLowerCase()
                ];
                
                // GENERACIÓN DE MENSAJES
                
                // Añadir mensajes de sistema (anuncios, usuarios que entran/salen)
                for (let i = 0; i < 50; i++) {
                    const systemTypes = ['announcement', 'join', 'leave'];
                    const systemType = systemTypes[Math.floor(Math.random() * systemTypes.length)];
                    
                    let systemMessage = '';
                    let systemIcon = 'fas fa-info-circle';
                    
                    if (systemType === 'join') {
                        const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                        const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                        systemMessage = `${firstName} ${lastName} se ha unido al chat`;
                        systemIcon = 'fas fa-user-plus';
                    } else if (systemType === 'leave') {
                        const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                        const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                        systemMessage = `${firstName} ${lastName} ha salido del chat`;
                        systemIcon = 'fas fa-user-minus';
                    } else {
                        const announcements = [
                            "Recuerda que puedes ganar $5 por compartir tu experiencia en nuestra sección de opiniones",
                            "¡Nueva función disponible! Ahora puedes programar transferencias recurrentes",
                            "Hemos mejorado nuestra tasa de cambio para Venezuela",
                            "Ahora puedes enviar dinero a 5 nuevos países. Visita remeexvisa.com/coberturaglobal",
                            "¡Promoción especial! 0% de comisión en tu primera transferencia",
                            "Nuevo concurso: refiere a 5 amigos y gana $50 en crédito",
                            "Actualización de la app disponible con nuevas funciones",
                            "Recordatorio: no compartas información bancaria sensible en el chat público",
                            "Ahora aceptamos pagos con Apple Pay y Google Pay",
                            "¡Ya somos más de 500,000 usuarios en todo el mundo!"
                        ];
                        
                        systemMessage = announcements[Math.floor(Math.random() * announcements.length)];
                        systemIcon = 'fas fa-bullhorn';
                    }
                    
                    messages.push({
                        id: `system-${i}`,
                        isSystem: true,
                        type: systemType,
                        icon: systemIcon,
                        message: systemMessage
                    });
                }
                
                // Generar preguntas y respuestas sobre cada categoría
                for (let i = 0; i < count / 5; i++) {
                    // TASA DE CAMBIO
                    if (i % 5 === 0) {
                        const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                        const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                        const username = `${firstName} ${lastName}`;
                        const initials = firstName.charAt(0) + lastName.charAt(0);
                        
                        // 30% de probabilidad de tener mala ortografía
                        let question = tasaQuestions[Math.floor(Math.random() * tasaQuestions.length)];
                        if (Math.random() < 0.3) {
                            const badSpellingFunc = badSpellingVersions[Math.floor(Math.random() * badSpellingVersions.length)];
                            question = badSpellingFunc(question);
                        }
                        
                        messages.push({
                            id: `tasa-q-${i}`,
                            username: username,
                            avatar: initials,
                            message: question,
                            isModerator: false,
                            categories: ['tasa']
                        });
                        
                        // Respuesta del moderador (50% de probabilidad)
                        if (Math.random() < 0.5) {
                            const modName = Math.random() < 0.5 ? 'Miguel Remeex' : 'Ana Remeex';
                            const modInitials = modName === 'Miguel Remeex' ? 'MR' : 'AR';
                            const response = tasaResponses[Math.floor(Math.random() * tasaResponses.length)];
                            
                            messages.push({
                                id: `tasa-r-${i}`,
                                username: modName,
                                avatar: modInitials,
                                message: `@${username} ${response}`,
                                isModerator: true,
                                categories: ['tasa']
                            });
                        }
                    }
                    
                    // VERIFICACIÓN
                    else if (i % 5 === 1) {
                        const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                        const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                        const username = `${firstName} ${lastName}`;
                        const initials = firstName.charAt(0) + lastName.charAt(0);
                        
                        // 30% de probabilidad de tener mala ortografía
                        let question = verificacionQuestions[Math.floor(Math.random() * verificacionQuestions.length)];
                        if (Math.random() < 0.3) {
                            const badSpellingFunc = badSpellingVersions[Math.floor(Math.random() * badSpellingVersions.length)];
                            question = badSpellingFunc(question);
                        }
                        
                        messages.push({
                            id: `verif-q-${i}`,
                            username: username,
                            avatar: initials,
                            message: question,
                            isModerator: false,
                            categories: ['verificacion']
                        });
                        
                        // Respuesta del moderador (50% de probabilidad)
                        if (Math.random() < 0.5) {
                            const modName = Math.random() < 0.5 ? 'Miguel Remeex' : 'Ana Remeex';
                            const modInitials = modName === 'Miguel Remeex' ? 'MR' : 'AR';
                            const response = verificacionResponses[Math.floor(Math.random() * verificacionResponses.length)];
                            
                            messages.push({
                                id: `verif-r-${i}`,
                                username: modName,
                                avatar: modInitials,
                                message: `@${username} ${response}`,
                                isModerator: true,
                                categories: ['verificacion']
                            });
                        }
                    }
                    
                    // BANCOS
                    else if (i % 5 === 2) {
                        const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                        const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                        const username = `${firstName} ${lastName}`;
                        const initials = firstName.charAt(0) + lastName.charAt(0);
                        
                        // 30% de probabilidad de tener mala ortografía
                        let question = bancosQuestions[Math.floor(Math.random() * bancosQuestions.length)];
                        if (Math.random() < 0.3) {
                            const badSpellingFunc = badSpellingVersions[Math.floor(Math.random() * badSpellingVersions.length)];
                            question = badSpellingFunc(question);
                        }
                        
                        messages.push({
                            id: `bank-q-${i}`,
                            username: username,
                            avatar: initials,
                            message: question,
                            isModerator: false,
                            categories: ['bancos']
                        });
                        
                        // Respuesta del moderador (50% de probabilidad)
                        if (Math.random() < 0.5) {
                            const modName = Math.random() < 0.5 ? 'Miguel Remeex' : 'Ana Remeex';
                            const modInitials = modName === 'Miguel Remeex' ? 'MR' : 'AR';
                            const response = bancosResponses[Math.floor(Math.random() * bancosResponses.length)];
                            
                            messages.push({
                                id: `bank-r-${i}`,
                                username: modName,
                                avatar: modInitials,
                                message: `@${username} ${response}`,
                                isModerator: true,
                                categories: ['bancos']
                            });
                        }
                    }
                    
                    // COMISIONES
                    else if (i % 5 === 3) {
                        const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                        const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                        const username = `${firstName} ${lastName}`;
                        const initials = firstName.charAt(0) + lastName.charAt(0);
                        
                        // 30% de probabilidad de tener mala ortografía
                        let question = comisionesQuestions[Math.floor(Math.random() * comisionesQuestions.length)];
                        if (Math.random() < 0.3) {
                            const badSpellingFunc = badSpellingVersions[Math.floor(Math.random() * badSpellingVersions.length)];
                            question = badSpellingFunc(question);
                        }
                        
                        messages.push({
                            id: `comis-q-${i}`,
                            username: username,
                            avatar: initials,
                            message: question,
                            isModerator: false,
                            categories: ['comisiones']
                        });
                        
                        // Respuesta del moderador (50% de probabilidad)
                        if (Math.random() < 0.5) {
                            const modName = Math.random() < 0.5 ? 'Miguel Remeex' : 'Ana Remeex';
                            const modInitials = modName === 'Miguel Remeex' ? 'MR' : 'AR';
                            const response = comisionesResponses[Math.floor(Math.random() * comisionesResponses.length)];
                            
                            messages.push({
                                id: `comis-r-${i}`,
                                username: modName,
                                avatar: modInitials,
                                message: `@${username} ${response}`,
                                isModerator: true,
                                categories: ['comisiones']
                            });
                        }
                    }
                    
                    // SOPORTE
                    else {
                        const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                        const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                        const username = `${firstName} ${lastName}`;
                        const initials = firstName.charAt(0) + lastName.charAt(0);
                        
                        // 30% de probabilidad de tener mala ortografía
                        let question = soporteQuestions[Math.floor(Math.random() * soporteQuestions.length)];
                        if (Math.random() < 0.3) {
                            const badSpellingFunc = badSpellingVersions[Math.floor(Math.random() * badSpellingVersions.length)];
                            question = badSpellingFunc(question);
                        }
                        
                        messages.push({
                            id: `support-q-${i}`,
                            username: username,
                            avatar: initials,
                            message: question,
                            isModerator: false,
                            categories: ['soporte']
                        });
                        
                        // Respuesta del moderador (70% de probabilidad, ya que soporte requiere más atención)
                        if (Math.random() < 0.7) {
                            const modName = Math.random() < 0.5 ? 'Miguel Remeex' : 'Ana Remeex';
                            const modInitials = modName === 'Miguel Remeex' ? 'MR' : 'AR';
                            const response = soporteResponses[Math.floor(Math.random() * soporteResponses.length)];
                            
                            messages.push({
                                id: `support-r-${i}`,
                                username: modName,
                                avatar: modInitials,
                                message: `@${username} ${response}`,
                                isModerator: true,
                                categories: ['soporte']
                            });
                        }
                    }
                }
                
                // Añadir comentarios generales y experiencias
                for (let i = 0; i < count / 4; i++) {
                    const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                    const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                    const username = `${firstName} ${lastName}`;
                    const initials = firstName.charAt(0) + lastName.charAt(0);
                    
                    // 30% de probabilidad de tener mala ortografía
                    let comment = generalComments[Math.floor(Math.random() * generalComments.length)];
                    if (Math.random() < 0.3) {
                        const badSpellingFunc = badSpellingVersions[Math.floor(Math.random() * badSpellingVersions.length)];
                        comment = badSpellingFunc(comment);
                    }
                    
                    messages.push({
                        id: `comment-${i}`,
                        username: username,
                        avatar: initials,
                        message: comment,
                        isModerator: false
                    });
                }
                
                // Añadir preguntas aleatorias variadas
                for (let i = 0; i < count / 4; i++) {
                    const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                    const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                    const username = `${firstName} ${lastName}`;
                    const initials = firstName.charAt(0) + lastName.charAt(0);
                    
                    // 30% de probabilidad de tener mala ortografía
                    let question = randomQuestions[Math.floor(Math.random() * randomQuestions.length)];
                    if (Math.random() < 0.3) {
                        const badSpellingFunc = badSpellingVersions[Math.floor(Math.random() * badSpellingVersions.length)];
                        question = badSpellingFunc(question);
                    }
                    
                    messages.push({
                        id: `random-q-${i}`,
                        username: username,
                        avatar: initials,
                        message: question,
                        isModerator: false
                    });
                    
                    // Respuesta del moderador o de otro usuario (50% de probabilidad)
                    if (Math.random() < 0.5) {
                        // 70% moderador, 30% usuario normal
                        if (Math.random() < 0.7) {
                            const modName = Math.random() < 0.5 ? 'Miguel Remeex' : 'Ana Remeex';
                            const modInitials = modName === 'Miguel Remeex' ? 'MR' : 'AR';
                            const response = randomResponses[Math.floor(Math.random() * randomResponses.length)];
                            
                            messages.push({
                                id: `random-mod-r-${i}`,
                                username: modName,
                                avatar: modInitials,
                                message: `@${username} ${response}`,
                                isModerator: true
                            });
                        } else {
                            const respFirstName = firstNames[Math.floor(Math.random() * firstNames.length)];
                            const respLastName = lastNames[Math.floor(Math.random() * lastNames.length)];
                            const respUsername = `${respFirstName} ${respLastName}`;
                            const respInitials = respFirstName.charAt(0) + respLastName.charAt(0);
                            
                            const userResponses = [
                                `${username} yo use el servicio la semana pasada y funciona super bien!`,
                                `si, eso mismo pregunte yo y me dijeron que ${randomResponses[Math.floor(Math.random() * randomResponses.length)].toLowerCase()}`,
                                `yo tambien queria saber eso, alguien q responda porfa`,
                                `@${username} segun tengo entendido ${randomResponses[Math.floor(Math.random() * randomResponses.length)].toLowerCase()}`,
                                `tengo la misma duda, llevo dias esperando respuesta`,
                                `creo q si, al menos eso me dijeron a mi cuando pregunte`,
                                `en mi experiencia ${randomResponses[Math.floor(Math.random() * randomResponses.length)].toLowerCase()}`,
                                `yo te puedo confirmar q si, lo uso cada mes sin problemas`,
                                `un amigo me dijo q ${randomResponses[Math.floor(Math.random() * randomResponses.length)].toLowerCase()}`,
                                `la verdad no estoy seguro, mejor espera q responda algun mod`
                            ];
                            
                            let userResponse = userResponses[Math.floor(Math.random() * userResponses.length)];
                            
                            // 30% de probabilidad de tener mala ortografía para respuestas de usuarios
                            if (Math.random() < 0.3) {
                                const badSpellingFunc = badSpellingVersions[Math.floor(Math.random() * badSpellingVersions.length)];
                                userResponse = badSpellingFunc(userResponse);
                            }
                            
                            messages.push({
                                id: `random-user-r-${i}`,
                                username: respUsername,
                                avatar: respInitials,
                                message: userResponse,
                                isModerator: false
                            });
                        }
                    }
                }
                
                // Randomizar el orden de los mensajes
                return shuffleArray(messages);
            }
            
            // Función para mezclar array (algoritmo Fisher-Yates)
            function shuffleArray(array) {
                const newArray = [...array];
                for (let i = newArray.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                }
                return newArray;
            }
        });
    </script>
</body>
</html>